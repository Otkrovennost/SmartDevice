"use strict";var anchor,ESC_KEYCODE=27,body=document.querySelector("body"),inputInFormCall=document.querySelector(".form-call input[name=tel]"),inputInFeedback=document.querySelector(".feedback__content input[name=tel]"),footerBlock=document.querySelector(".footer"),footerNavBlock=footerBlock.querySelector(".footer__nav"),footerContactsBlock=footerBlock.querySelector(".footer__contacts"),footerNavToggler=footerBlock.querySelector(".footer__input--nav"),footerContactsToggler=footerBlock.querySelector(".footer__input--contacts"),popupElement=document.querySelector(".popup"),submitForm=popupElement.querySelector("form"),popupClose=popupElement.querySelector(".popup__button--closer"),userName=popupElement.querySelector("[name = name]"),userTel=popupElement.querySelector("[name = tel]"),userMessage=popupElement.querySelector("[name = user-message]"),openUserMessageLink=document.querySelector(".nav__call"),storageName=localStorage.getItem("name"),storageTell=localStorage.getItem("tel"),storageMessage=localStorage.getItem("user-message"),anchorList=document.querySelectorAll(".anchor-link"),validatePhoneInForm=new IMask(inputInFormCall,{mask:"+{7}(000)000-00-00"}),validatePhoneInFeedback=new IMask(inputInFeedback,{mask:"+{7}(000)000-00-00"}),getDefaultState=function(){footerNavBlock.classList.remove("footer__nav--nojs"),footerContactsBlock.classList.remove("footer__contacts--nojs"),footerNavBlock.classList.add("footer__nav--closed"),footerContactsBlock.classList.add("footer__contacts--closed")},showFooterNavBlock=function(){footerNavBlock.classList.remove("footer__nav--closed"),footerNavBlock.classList.add("footer__nav--opened")},hideFooterNavBlock=function(){footerNavBlock.classList.remove("footer__nav--opened"),footerNavBlock.classList.add("footer__nav--closed")},showFooterContactsBlock=function(){footerContactsBlock.classList.remove("footer__contacts--closed"),footerContactsBlock.classList.add("footer__contacts--opened")},hideFooterContactsBlock=function(){footerContactsBlock.classList.remove("footer__contacts--opened"),footerContactsBlock.classList.add("footer__contacts--closed")},onClickNavToggler=function(){footerContactsBlock.classList.contains("footer__contacts--opened")||footerNavBlock.classList.contains("footer__nav--closed")?(showFooterNavBlock(),hideFooterContactsBlock()):hideFooterNavBlock()},onClickContactsToggler=function(){footerNavBlock.classList.contains("footer__nav--opened")||footerContactsBlock.classList.contains("footer__contacts--closed")?(showFooterContactsBlock(),hideFooterNavBlock()):hideFooterContactsBlock()},getScrollbarWidth=function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",body.appendChild(e);var o=document.createElement("div");e.appendChild(o);var t=e.offsetWidth-o.offsetWidth;return e.parentNode.removeChild(e),t},disableScrolling=function(){var e=getScrollbarWidth();body.style.paddingRight=e+"px",body.classList.add("no-scroll")},enableScrolling=function(){body.removeAttribute("style"),body.classList.remove("no-scroll")},scrollToContent=function(){for(var e=0;e<anchorList.length;e++)(anchor=anchorList[e]).addEventListener("click",function(e){e.preventDefault();var o=("SPAN"===e.target.nodeName?e.target.parentNode:e.target).getAttribute("href");"#"!==o&&document.querySelector(o).scrollIntoView({behavior:"smooth",block:"start"})})},popupCloserHandler=function(){popupElement.classList.remove("popup--show"),enableScrolling()},saveInLocalStorage=function(){(userName.value||userTel.value||userMessage.value)&&(localStorage.setItem("name",userName.value),localStorage.setItem("tel",userTel.value),localStorage.setItem("user-message",userMessage.value),popupCloserHandler())},getInLocalStorage=function(){(storageName||storageTell||storageMessage)&&(userName.value=storageName,userTel.value=storageTell,userMessage.value=storageMessage)},closeByEsc=function(){document.addEventListener("keydown",function(e){e.keyCode===ESC_KEYCODE&&popupCloserHandler()})},closeOnClickOutsideHandler=function(e){e.target.classList.contains("popup__overlay")&&popupCloserHandler()},popupOpenHandler=function(){popupElement&&(popupElement.classList.add("popup--show"),userName.focus(),getInLocalStorage(),disableScrolling()),popupClose.addEventListener("click",popupCloserHandler),closeByEsc(),document.addEventListener("click",closeOnClickOutsideHandler)},submilFormCall=function(){saveInLocalStorage()};svg4everybody(),getDefaultState(),scrollToContent(),openUserMessageLink.addEventListener("click",popupOpenHandler),submitForm.addEventListener("submit",submilFormCall),footerNavToggler.addEventListener("click",onClickNavToggler),footerContactsToggler.addEventListener("click",onClickContactsToggler);